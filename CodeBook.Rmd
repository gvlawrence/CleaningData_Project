---
title: "CodeBook"
author: "Greg Lawrence"
date: "February 1, 2016"
output: 
  html_document:
    keep_md: yes
---

## Getting and Cleaning Data - Course Project
The code in this repo relates to the Course Project for JHU Coursera course Getting and Cleaning Data. See https://www.coursera.org/learn/data-cleaning for more info.

## Data source
The data analysed was collected from the accelerometers from the Samsung Galaxy S smartphone. More information about 
the study and its data can be found at:
http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones.

The original source data for this project can be found (at time of writing) at:
https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip

## Objectives
The assignment instructions are as follows:

You will be required to submit:

  1. a tidy data set as described below 
  2. a link to a Github repository with your script for performing the analysis
  3. a code book that describes the variables, the data, and any transformations or work that you performed to clean up the data called CodeBook.md.   

You should also include a README.md in the repo with your scripts, explaining how all of the scripts work and how they are connected.  

You should create one R script called run_analysis.R that does the following:

  1. Merges the training and the test sets to create one data set.
  2. Extracts only the measurements on the mean and standard deviation for each measurement. 
  3. Uses descriptive activity names to name the activities in the data set.
  4. Appropriately labels the data set with descriptive variable names. 
  5. From the data set in step 4, creates a second, independent tidy data set with the average of each variable for each activity and each subject.

## run_analysis.R
This contains the code to read the source data, manipulate it as necessary, and output the required tidy dataset. It performs the following:

1. Reads the source data from the "UCI HAR Dataset" directory, which should be in the same library as the source code.
2. Reads measurements from the *test* and *train* data sets, and merges them together.
3. Reads selected source data into vectors and data tables for later code use.
4. Updates variable names so they are more readable.
5. Extracts mean and standard deviation measurements.
6. Set descriptive activity names to the measurements in the data set.
7. Appropriately labels the data set with descriptive variable names. 
8. Summarises the data by subject and activity and takes the average for each combination.
9. Outputs the summarised data set to a file named *HAR_TidyData.txt*.

## HAR_TidyData.txt
This is the output file created by the script.
It is in CSV (comma-separated-values) format to allow loading in Excel and other packages.
Row names are not provided, however there are column headings in the first row.
Note that the source data consists of 30 distinct subjects, and there are 6 different activity types, so the total
number of rows/lines in the summarised output file should be 180.

A subset of the output data is shown below (first 10 rows and 7 columns). Note that the leading row number
represents the original row number before the data was sorted into subject order:

```{r,eval=FALSE}
> head(outSort,10)
    subject          activity tbodyacc-mean-x tbodyacc-mean-y tbodyacc-mean-z tbodyacc-std-x tbodyacc-std-y
1         1           walking       0.2773308    -0.017383819      -0.1111481   -0.283740259    0.114461337
2         1   walkingupstairs       0.2554617    -0.023953149      -0.0973020   -0.354708025   -0.002320265
3         1 walkingdownstairs       0.2891883    -0.009918505      -0.1075662    0.030035338   -0.031935943
4         1           sitting       0.2612376    -0.001308288      -0.1045442   -0.977229008   -0.922618642
5         1          standing       0.2789176    -0.016137590      -0.1106018   -0.995759902   -0.973190056
6         1            laying       0.2215982    -0.040513953      -0.1132036   -0.928056469   -0.836827406
127       2           walking       0.2788646    -0.016721361      -0.1071125   -0.008659219    0.100384246
128       2   walkingupstairs       0.2483915    -0.026862256      -0.1175509    0.083573864    0.250067524
129       2 walkingdownstairs       0.2844590    -0.019799937      -0.1074158    0.348618168    0.239812251
130       2           sitting       0.2735838    -0.012346845      -0.1058274   -0.978466824   -0.928059134```
```

The structure listing below shows all variable names from the data frame that was written to the output 
file (together with the usual other detail provided by "str"):

```{r,eval=FALSE}
> str(outSort)
'data.frame':	180 obs. of  68 variables:
 $ subject                  : int  1 1 1 1 1 1 2 2 2 2 ...
 $ activity                 : chr  "walking" "walkingupstairs" "walkingdownstairs" "sitting" ...
 $ tbodyacc-mean-x          : num  0.277 0.255 0.289 0.261 0.279 ...
 $ tbodyacc-mean-y          : num  -0.01738 -0.02395 -0.00992 -0.00131 -0.01614 ...
 $ tbodyacc-mean-z          : num  -0.1111 -0.0973 -0.1076 -0.1045 -0.1106 ...
 $ tbodyacc-std-x           : num  -0.284 -0.355 0.03 -0.977 -0.996 ...
 $ tbodyacc-std-y           : num  0.11446 -0.00232 -0.03194 -0.92262 -0.97319 ...
 $ tbodyacc-std-z           : num  -0.26 -0.0195 -0.2304 -0.9396 -0.9798 ...
 $ tgravityacc-mean-x       : num  0.935 0.893 0.932 0.832 0.943 ...
 $ tgravityacc-mean-y       : num  -0.282 -0.362 -0.267 0.204 -0.273 ...
 $ tgravityacc-mean-z       : num  -0.0681 -0.0754 -0.0621 0.332 0.0135 ...
 $ tgravityacc-std-x        : num  -0.977 -0.956 -0.951 -0.968 -0.994 ...
 $ tgravityacc-std-y        : num  -0.971 -0.953 -0.937 -0.936 -0.981 ...
 $ tgravityacc-std-z        : num  -0.948 -0.912 -0.896 -0.949 -0.976 ...
 $ tbodyaccjerk-mean-x      : num  0.074 0.1014 0.0542 0.0775 0.0754 ...
 $ tbodyaccjerk-mean-y      : num  0.028272 0.019486 0.02965 -0.000619 0.007976 ...
 $ tbodyaccjerk-mean-z      : num  -0.00417 -0.04556 -0.01097 -0.00337 -0.00369 ...
 $ tbodyaccjerk-std-x       : num  -0.1136 -0.4468 -0.0123 -0.9864 -0.9946 ...
 $ tbodyaccjerk-std-y       : num  0.067 -0.378 -0.102 -0.981 -0.986 ...
 $ tbodyaccjerk-std-z       : num  -0.503 -0.707 -0.346 -0.988 -0.992 ...
 $ tbodygyro-mean-x         : num  -0.0418 0.0505 -0.0351 -0.0454 -0.024 ...
 $ tbodygyro-mean-y         : num  -0.0695 -0.1662 -0.0909 -0.0919 -0.0594 ...
 $ tbodygyro-mean-z         : num  0.0849 0.0584 0.0901 0.0629 0.0748 ...
 $ tbodygyro-std-x          : num  -0.474 -0.545 -0.458 -0.977 -0.987 ...
 $ tbodygyro-std-y          : num  -0.05461 0.00411 -0.12635 -0.96647 -0.98773 ...
 $ tbodygyro-std-z          : num  -0.344 -0.507 -0.125 -0.941 -0.981 ...
 $ tbodygyrojerk-mean-x     : num  -0.09 -0.1222 -0.074 -0.0937 -0.0996 ...
 $ tbodygyrojerk-mean-y     : num  -0.0398 -0.0421 -0.044 -0.0402 -0.0441 ...
 $ tbodygyrojerk-mean-z     : num  -0.0461 -0.0407 -0.027 -0.0467 -0.049 ...
 $ tbodygyrojerk-std-x      : num  -0.207 -0.615 -0.487 -0.992 -0.993 ...
 $ tbodygyrojerk-std-y      : num  -0.304 -0.602 -0.239 -0.99 -0.995 ...
 $ tbodygyrojerk-std-z      : num  -0.404 -0.606 -0.269 -0.988 -0.992 ...
 $ tbodyaccmag-mean         : num  -0.137 -0.1299 0.0272 -0.9485 -0.9843 ...
 $ tbodyaccmag-std          : num  -0.2197 -0.325 0.0199 -0.9271 -0.9819 ...
 $ tgravityaccmag-mean      : num  -0.137 -0.1299 0.0272 -0.9485 -0.9843 ...
 $ tgravityaccmag-std       : num  -0.2197 -0.325 0.0199 -0.9271 -0.9819 ...
 $ tbodyaccjerkmag-mean     : num  -0.1414 -0.4665 -0.0894 -0.9874 -0.9924 ...
 $ tbodyaccjerkmag-std      : num  -0.0745 -0.479 -0.0258 -0.9841 -0.9931 ...
 $ tbodygyromag-mean        : num  -0.161 -0.1267 -0.0757 -0.9309 -0.9765 ...
 $ tbodygyromag-std         : num  -0.187 -0.149 -0.226 -0.935 -0.979 ...
 $ tbodygyrojerkmag-mean    : num  -0.299 -0.595 -0.295 -0.992 -0.995 ...
 $ tbodygyrojerkmag-std     : num  -0.325 -0.649 -0.307 -0.988 -0.995 ...
 $ fbodyacc-mean-x          : num  -0.2028 -0.4043 0.0382 -0.9796 -0.9952 ...
 $ fbodyacc-mean-y          : num  0.08971 -0.19098 0.00155 -0.94408 -0.97707 ...
 $ fbodyacc-mean-z          : num  -0.332 -0.433 -0.226 -0.959 -0.985 ...
 $ fbodyacc-std-x           : num  -0.3191 -0.3374 0.0243 -0.9764 -0.996 ...
 $ fbodyacc-std-y           : num  0.056 0.0218 -0.113 -0.9173 -0.9723 ...
 $ fbodyacc-std-z           : num  -0.28 0.086 -0.298 -0.934 -0.978 ...
 $ fbodyaccjerk-mean-x      : num  -0.1705 -0.4799 -0.0277 -0.9866 -0.9946 ...
 $ fbodyaccjerk-mean-y      : num  -0.0352 -0.4134 -0.1287 -0.9816 -0.9854 ...
 $ fbodyaccjerk-mean-z      : num  -0.469 -0.685 -0.288 -0.986 -0.991 ...
 $ fbodyaccjerk-std-x       : num  -0.1336 -0.4619 -0.0863 -0.9875 -0.9951 ...
 $ fbodyaccjerk-std-y       : num  0.107 -0.382 -0.135 -0.983 -0.987 ...
 $ fbodyaccjerk-std-z       : num  -0.535 -0.726 -0.402 -0.988 -0.992 ...
 $ fbodygyro-mean-x         : num  -0.339 -0.493 -0.352 -0.976 -0.986 ...
 $ fbodygyro-mean-y         : num  -0.1031 -0.3195 -0.0557 -0.9758 -0.989 ...
 $ fbodygyro-mean-z         : num  -0.2559 -0.4536 -0.0319 -0.9513 -0.9808 ...
 $ fbodygyro-std-x          : num  -0.517 -0.566 -0.495 -0.978 -0.987 ...
 $ fbodygyro-std-y          : num  -0.0335 0.1515 -0.1814 -0.9623 -0.9871 ...
 $ fbodygyro-std-z          : num  -0.437 -0.572 -0.238 -0.944 -0.982 ...
 $ fbodyaccmag-mean         : num  -0.1286 -0.3524 0.0966 -0.9478 -0.9854 ...
 $ fbodyaccmag-std          : num  -0.398 -0.416 -0.187 -0.928 -0.982 ...
 $ fbodybodyaccjerkmag-mean : num  -0.0571 -0.4427 0.0262 -0.9853 -0.9925 ...
 $ fbodybodyaccjerkmag-std  : num  -0.103 -0.533 -0.104 -0.982 -0.993 ...
 $ fbodybodygyromag-mean    : num  -0.199 -0.326 -0.186 -0.958 -0.985 ...
 $ fbodybodygyromag-std     : num  -0.321 -0.183 -0.398 -0.932 -0.978 ...
 $ fbodybodygyrojerkmag-mean: num  -0.319 -0.635 -0.282 -0.99 -0.995 ...
 $ fbodybodygyrojerkmag-std : num  -0.382 -0.694 -0.392 -0.987 -0.995 ...
```